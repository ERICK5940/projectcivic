# Live Location & Photo Capture Features

The Citizen dashboard now includes **Live GPS Location Capture** and **Live Camera Photo Capture** features for authentic evidence collection.

## ðŸŽ¥ Features Added

### 1. **Live Camera Capture**
- Access device camera in real-time
- Capture evidence photos directly from the app
- Preview captured photos before submission
- Clear and retake photos if needed

### 2. **Live GPS Location Capture**
- Get precise GPS coordinates (Latitude & Longitude)
- Shows location accuracy (Â±meters)
- Automatic location information display
- Hidden coordinates field for submission

## ðŸ“± How to Use

### **Citizen Dashboard - Reporting an Issue**

#### Step 1: Fill Basic Information
```
1. Reporter Name: Your name
2. Problem Type: Select the issue type (Roads, Water, Garbage, etc.)
3. District: Select your district
4. Pincode: Enter 6-digit pincode
5. Description: Describe the issue in detail
```

#### Step 2: Capture Live Location
```
1. Click the ðŸ—ºï¸ GPS button next to "Location"
2. Allow location access when browser prompts
3. Location status will show:
   âœ… Latitude: XX.XXXXXX
   âœ… Longitude: XX.XXXXXX  
   âœ… Accuracy: Â±XXm
4. Manually enter area/street details in the text field
```

#### Step 3: Capture Live Evidence Photo
```
1. Click "Start Camera" button
2. Allow camera access when browser prompts
3. Frame the issue properly in the camera view
4. Click "Capture Photo" to take the photo
5. Preview appears below - if satisfied, continue
6. If not satisfied, click "Clear Photo" and retake
7. Click "Stop Camera" when done
```

#### Step 4: Submit Complaint
```
1. Review all information
2. Click "Submit Complaint" button
3. Complaint is submitted with:
   âœ“ Location coordinates (GPS)
   âœ“ Evidence photo
   âœ“ All other details
4. Get Complaint ID for tracking
```

---

## ðŸ” Browser Permissions Required

When you use these features, the browser will ask for:

### **Camera Permission**
```
"This site wants to access your camera"
â†’ Click "Allow"
```

### **Location Permission**
```
"This site wants to know your location"
â†’ Click "Allow"
```

âš ï¸ **Note**: These permissions are used ONLY by your browser locally. The app will NOT collect data without your explicit permission.

---

## ðŸ“ Location Details Explained

When you capture location, you get:

```
Latitude:  12.971599
Longitude: 77.594562
Accuracy:  Â±25m
```

**What this means:**
- **Latitude**: How far North/South you are (0Â° = Equator)
- **Longitude**: How far East/West you are (0Â° = Prime Meridian)
- **Accuracy**: The location might be Â±25 meters from your actual location

---

## ðŸ“¸ Photo Capture Tips

âœ… **Good Photo Practice:**
- Ensure good lighting
- Frame the issue clearly
- Include context (street name, landmark)
- Avoid blurry shots
- Include wide angle view if possible

âŒ **Avoid:**
- Dark/blurry photos
- Photos that don't show the issue
- Only close-ups without context
- Photos of people's faces
- Inappropriate content

---

## ðŸ”§ Technical Details

### **Live Camera Implementation**
- Uses WebRTC `getUserMedia()` API
- Supports both front and rear cameras on mobile
- Captures in JPEG format at 80% quality
- Photo stored as Base64 data
- Maximum file size: ~2MB per photo

### **GPS Location Implementation**
- Uses W3C Geolocation API
- Gets position with high accuracy
- Timeout: 10 seconds
- Activates only on user click (privacy-first)

### **Browser Compatibility**

| Feature | Chrome | Firefox | Safari | Edge |
|---------|--------|---------|--------|------|
| Camera | âœ… Yes | âœ… Yes | âœ… Yes | âœ… Yes |
| GPS | âœ… Yes | âœ… Yes | âœ… Yes | âœ… Yes |
| HTTPS Only | âŒ No | âœ… Yes* | âœ… Yes | âœ… Yes |

*Chrome allows HTTP on localhost for testing

---

## ðŸ›¡ï¸ Privacy & Security

### **Your Data is Safe Because:**
1. âœ… Photos are processed on your device first
2. âœ… Location is captured by your browser, not the app
3. âœ… No data is sent until YOU click "Submit"
4. âœ… Photos are stored with complaint ID, not your personal data
5. âœ… You can clear photo anytime before submission

### **What Happens to Your Data:**
```
1. Photo â†’ Captured on your device
2. Coordinates â†’ Generated by your GPS
3. Data â†’ Sent securely to server ONLY on submission
4. Storage â†’ Stored with your complaint for officials review
5. Access â†’ Only visible to authorized municipalOfficers
```

---

## âš ï¸ Troubleshooting

### **Camera Not Working**
```
Problem: "Camera Error" message appears
Solution:
1. Check if you allowed camera access
2. Ensure no other app is using camera
3. Restart browser and try again
4. Check camera permissions in browser settings
5. Try different browser if still not working
```

### **Location Not Captured**
```
Problem: "Location unavailable" message
Solution:
1. Ensure location services are enabled on device
2. Open location settings: 
   - Android: Settings > Location > On
   - iPhone: Settings > Privacy > Location Services
3. Check if browser has location permission
4. Try again with Wi-Fi enabled
Note: GPS works better outdoors
```

### **Photo is Blurry**
```
Solution:
1. Ensure good lighting (use daylight if possible)
2. Hold camera steady for 2 seconds
3. Clean camera lens
4. Increase distance from object
5. Try "Clear Photo" and retake
```

### **Location Shows Wrong Position**
```
â€¢ GPS accuracy is Â±25-50m typically
â€¢ May take 5-10 seconds to get location
â€¢ Works better with clear sky view
â€¢ Indoor accuracy is lower
â€¢ Consider entering manual location too
```

---

## ðŸ“Š Complaint Submission Checklist

Before clicking "Submit Complaint":

- [ ] Reporter name entered
- [ ] Problem type selected
- [ ] District selected
- [ ] Valid 6-digit pincode entered
- [ ] Clear description written
- [ ] Location coordinates captured (GPS button clicked)
- [ ] Area/street details entered
- [ ] Evidence photo captured and visible
- [ ] Photo clearly shows the issue

---

## ðŸŽ“ Complete Example

**Reporting a Pothole:**

```
1. Name: Rajesh Kumar
2. Type: Damaged Roads
3. District: Chennai
4. Pincode: 600001
5. Description: Large pothole on Mount Road, 
                about 2ft diameter, water pooling
6. Location: Mount Road, near Spencer's Plaza
7. GPS: 13.051350, 80.265240 (Â±12m)
8. Photo: [Clear photo of pothole with surroundings]

â†’ SUBMIT COMPLAINT
âœ… Complaint ID: CMP-20260219142530-8475
```

Now authorities can:
- Know exact location (GPS coordinates)
- See the damage (photo evidence)
- Verify authenticity (hard to fake with live capture)
- Respond faster (all info in one place)

---

## ðŸ’¡ Tips for Best Results

ðŸŽ¯ **Location Accuracy:**
- Use outdoors for best GPS accuracy
- Wait for accuracy to stabilize (< 50m)
- In areas with tall buildings, accuracy may reduce

ðŸ“¸ **Photo Quality:**
- Use natural daylight
- Avoid backlighting
- Take photo from eye level
- Include reference objects (coin, person for scale)
- Multiple angles help verification

---

## ðŸš€ For Enhanced Security

The system provides:
- âœ… Live proof of issue existence
- âœ… Exact GPS coordinates
- âœ… Photo metadata (not visible but recorded)
- âœ… Timestamp of report
- âœ… Complaint ID for tracking

This makes it **extremely difficult to file false reports** while making legitimate reports stronger!

---

## â“ FAQ

**Q: Is my location shared publicly?**
A: No! Location is visible only to municipal officials handling your complaint.

**Q: Can someone else submit a complaint using my photo?**
A: No, each complaint is linked to your login account.

**Q: Can I submit without photo?**
A: Yes, photo is optional, but highly recommended.

**Q: Can I submit without location?**
A: Yes, location is optional, but GPS adds credibility.

**Q: How long are photos stored?**
A: Photos are stored until complaint is resolved and archived.

**Q: Can I edit photo after submission?**
A: No, but you can submit a new complaint with additional photos.

---

## ðŸ“ž Support

If features don't work:
1. Check browser compatibility
2. Ensure browser permission settings
3. Try on different device
4. Clear browser cache and cookies
5. Use latest browser version

For reporting bugs or feature requests, contact the development team.

---

**Enjoy using Live Location & Photo Capture for authentic civic reporting!** ðŸŽ‰
